5     ' CROSSTRACKS10    ' BY LARRY HATCH (C) 198315    ' F256/SUPERBASIC PORT BY MICHAEL CASSERA, 202520    25    30    35    bload"crosstracks.bin",$10000 'load tileset40    poke $d002,4  'layer zero, tile map 045    poke $d003,0  'no layer information50    poke $d204,20  'num of tiles across55    poke $d206,15  'num of tiles down60    poke $d000,23 'tiles on text overlay enabled65    poke $d200,1  'tiles on/16x1670    75    pokew $d201,$7000 'tile map located at $700080    pokel $d280,$10000 'tiles located at $1000085    90    cursor off95    cls100   105   bd=$7088   'top left of game board110   qa=$680    'keyboard buffer115   qb=0       'unknown variable120   sc=$c000   'screen location125   vl=$d418   'SID1 volume130   p1=$d401   'SID1 voice1 HI freq135   p3=$d40f   'SID1 voice3 HI freq140   ad=$d405   'SID1 voice1 AD145   sr=$d406   'SID1 voice1 SR150   wf=$d404   'SID1 waveform/gate155   pl$=chr$(180)160   cp$=chr$(180)165   pc=$22170   cc=$d2175   w=alloc(1)180   185   190   setpalette()195   setupboard()200   205   poke wf,0210   dim b(9,9),v(9,9)215   home()220   print chr$(128);"     Instructions?  "225   poke qa,0230   235   anykey(qa)240   z$=inkey$()245   if z$="y" then inst(qa)250   255   ' Initial score values260   for i=0 to 9265     for j=0 to 9270       a#=abs(i-4.5)275       b#=abs(j-4.5)280       v(i,j)=int(21-a#-b#)285     next290   next295   300   for i=0 to 9305     for j=0 to 9310       b(i,j)=0315     next320   next325   330   While wp=0335     repeat340       repeat345         clearside()350         home()355         print "     Your move."360         print "     Row (A-J) ";365    370         poke wf,0375         poke ad,12380         poke vl,15385         poke p3,31390         wp=0395         poke sr,0400         poke p1,133405         poke wf,21410   415         anykey(qa)420         r$=inkey$()425         print r$430         r=asc(r$)-97435       until ((r>-1) & (r<10))440   445       repeat450         print "     Line(0-9) ";455         anykey(qa)460         l$=inkey$()465         print l$470       until ((asc(l$)>47) & (asc(l$)<58))475       l=val(l$)480     until b(l,r)=0485   490     clearside()495     home()500    505   510     poke 1,2515     poke sc+4326,asc(r$)520     poke sc+4327,asc(l$)525     poke sc+4328,asc(pl$)530     poke bd+2*(r*20+l),37535     poke 1,3540     poke sc+4328,pc545     poke 1,0550     b(l,r)=1555     v(l,r)=-9999560   565     print570     print "     Computer move"575     print "     Thinking...  "580   585     poke w,0 : 'win condition 0 - nobody590     poke wf,0595     poke vl,8600     poke sr,250605   610     jp=1615     poke p1,1620     poke p3,1625     poke wf,19630   635     for i=0 to 9640       poke 1,2645       poke sc+4332,i+97650       poke 1,0655       for j=0 to 5660         s=0665         for k=j to j+4670           s=s+b(i,k)675         next680         lanecheck(s,i,j,jp,w)685         poke 1,2690         poke sc+4333,j+48695         poke 1,0700         poke p1,33+s*3705         poke p3,i+j710       next715     next720   725     jp=2730     for j=0 to 9735       poke 1,2740       poke sc+4333,j+48745       poke 1,0750       for i=0 to 5755         s=0760         for k=i to i+4765           s=s+b(k,j)770         next775         lanecheck(s,i,j,jp,w)780         poke 1,2785         poke sc+4332,i+97790         poke 1,0795         poke p3,i+j800         poke p1,40+s*3805       next810     next815     poke wf,0820   825     if peek(w)=0830       vs=-9999835       for i=0 to 9840         poke vl,9845         poke vl,0850         for j=0 to 9855           if v(i,j)>vs860             vs=v(i,j)865             x=i870             y=j875           endif880         next885       next890       poke 1,2895       poke sc+4332,y+97900       poke sc+4333,x+48905       poke sc+4334,asc(cp$)910       b(x,y)=6915       v(x,y)=-9999920       poke bd+2*(y*20+x),36925       poke 1,3930       poke sc+4334,cc935       poke 1,0940     else945       if peek(w)=1 then print:print "     YOU WIN!"950       if peek(w)=2 then print:print "     YOU LOSE"955       print:print "     Another game?     "960       anykey(qa)965       z$=inkey$()970       if z$="y"975         run980       else985         gameover()990       endif995     endif1000    1005    print "     Checking..."1010    poke wf,01015    poke sr,2501020    poke vl,81025    poke wf,211030    for i=0 to 91035      for j=0 to 51040        s=01045        for k=j to j+41050          s=s+b(i,k)1055        next1060        if s=30 then poke w,21065        poke p3,i+j1070        poke p1,48+s*31075      next1080    next1085    for j=0 to 91090      for i=0 to 51095        s=01100        for k=i to i+41105          s=s+b(k,j)1110        next1115        poke p3,i+j1120        poke p1,48+s*31125        if s=30 then poke w,21130      next1135    next1140    poke wf,01145    if peek(w)=21150      print1155      print "     YOU LOSE"1160      print1165      print "     Another game? "1170      anykey(qa)1175      z$=inkey$()1180      if z$="y"1185        run1190      else1195        gameover()1200      endif1205    else1210      wp=01215    endif1220    s=01225    for j=0 to 91230      for i=0 to 91235        if b(i,j)<>0 then s=s+11240      next1245    next1250    if s=1001255      print1260      print "     No more moves."1265      print1270      print "     Another game? "1275      anykey(qa)1280      z$=inkey$()1285      if z$="y"1290        run1295      else1300        gameover()1305      endif1310    endif1315  wend   1320  end1325  1330  proc setpalette()1335    poke 1,11340    for n=0 to 321345      read b1350      pokel (n*4)+$d000,b1355      pokel (n*4)+$d003,$ff1360    next1365    poke 1,01370  endproc1375     1380  proc setupboard()1385    cls 1390    for n=0 to 2991395      read a1400      poke $7001+(2*n),01405      poke $7000+(2*n),a1410    next1415  endproc1420  1425  proc inst(qa)1430    cprint1435    cprint "     The object of the "1440    cprint "     game is to place  " 1445    cprint "     five of your men  "1450    cprint "     in a row before   "1455    cprint "     the computer does."1460    cprint1465    cprint "     *Diagonals don't  "1470    cprint "     count.            "1475    cprint1480    cprint "     ";1485    print chr$(128+2);1490    cprint pl$;1495    print chr$(128);" - Your man     "1500    cprint "     ";1505    print chr$(128+13);1510    cprint cp$;1515    print chr$(128);" - Computer man "1520    cprint1525    cprint "     Place your men in "1530    cprint "     any blank square  "1535    cprint "     by entering its   "1540    cprint "     letter, then"1545    cprint "     number."1550    cprint1555    cprint "       PRESS ANY KEY   "1560    cprint "          TO PLAY      "1565    anykey(qa)1570    z$=inkey$()1575  endproc1580  1585  proc lanecheck(s,i,j,jp,w)1590    ink=01595    if s=5 then poke w,1 : ' player wins1600    if s=30 then poke w,2 : ' computer wins1605    if ((s=1)|(s=6)) then ink=101610    if ((s=2)|(s=12)) then ink=25+s1615    if ((s=3)|(s=18)) then ink=90+3*s1620    if ((s=4)|(s=24)) then ink=500+9*s:wp=11625    if ((s=7)|(s=8)|(s=9)|(s=13)|(s=14)|(s=19)) then ink=-21630    if ink<>01635      if jp=11640        for k=j to j+41645          v(i,k)=v(i,k)+ink1650        next1655      else1660        for k=i to i+41665          v(k,j)=v(k,j)+ink1670        next1675      endif1680    endif1685  endproc  1690  1695  proc gameover()1700    cls1705    poke $d000,11710    poke $d001,01715    cursor on1720    print "Thanks for playing!"1725    end1730  endproc1735  1740  proc anykey(qa)1745    repeat1750    if peek(qa)>1 then poke qa,01755    until peek(qa)=11760  endproc1765  1770  proc home()1775    pokew $40,$c0001780    pokew $7ea,$00001785    for n=1 to 91790      print1795    next1800  endproc1805  1810  proc clearside()1815    home()1820    for i=0 to 301825      print "                       "1830    next1835  endproc1840  1845  ' palette1850  data $0000001855  data $8a6f301860  data $8f974a1865  data $d77bba1870  data $d957631875  data $ac32321880  data $76428a1885  data $5956521890  data $696a6a1895  data $847e871900  data $9badb71905  data $ffffff1910  data $cbdbfc1915  data $5fcde41920  data $639bff1925  data $5b6ee11930  data $3060821935  data $3f3f741940  data $323c391945  data $524b241950  data $4b692f1955  data $37946e1960  data $6abe301965  data $99e5501970  data $fbf2361975  data $eec39a1980  data $d9a0661985  data $df71261990  data $8f563b1995  data $6639312000  data $45283c2005  data $2220342010  data $0000002015  2020  ' tilemap display2025  data 1,1,1,1,1,2,3,4,5,6,7,8,9,10,11,1,1,1,1,12030  data 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,12035  data 1,12,13,13,13,14,1,15,16,17,18,19,20,21,22,23,24,25,26,12040  data 1,27,28,28,28,29,1,30,31,31,31,31,31,31,31,31,31,31,30,12045  data 1,27,28,28,28,29,1,32,31,31,31,31,31,31,31,31,31,31,32,12050  data 1,27,28,28,28,29,1,33,31,31,31,31,31,31,31,31,31,31,33,12055  data 1,27,28,28,28,29,1,34,31,31,31,31,31,31,31,31,31,31,34,12060  data 1,27,28,28,28,29,1,35,31,31,31,31,31,31,31,31,31,31,35,12065  data 1,27,28,28,28,29,1,38,31,31,31,31,31,31,31,31,31,31,38,12070  data 1,27,28,28,28,29,1,39,31,31,31,31,31,31,31,31,31,31,39,12075  data 1,27,28,28,28,29,1,40,31,31,31,31,31,31,31,31,31,31,40,12080  data 1,27,28,28,28,29,1,41,31,31,31,31,31,31,31,31,31,31,41,12085  data 1,27,28,28,28,29,1,42,31,31,31,31,31,31,31,31,31,31,42,12090  data 1,43,44,44,44,45,1,46,16,17,18,19,20,21,22,23,24,25,47,12095  data 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1